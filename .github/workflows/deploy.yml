name: Deploy website to Heroku
on:
  push:
    branches:
      - master
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout action
        uses: actions/checkout@v2
        with:
          # Make sure the actual branch is checked out when running on pull requests
          ref: ${{ github.head_ref }}
      - name: Generate Data Schema
        uses: noah-software/django_action@v1.0
        with:
          # This part is also where you can pass other options, for example:
          pip_path: testfolder/app/requirements.txt
          project_path: app/
          output_path: docs/model.png
      #- name: Django Coverage action
      #  uses: actions/python-django-coverage-gitHub-action@0.9
      - name: Deploy to Heroku
        uses: akhileshns/heroku-deploy@v3.5.6 # This is the action  
        with:
          django-app: 'sample_app'
          minimum-coverage: '86'
          heroku_api_key: ${{secrets.HEROKU_KEY}}
          heroku_app_name: ${{secrets.HEROKU_APP}}
          heroku_email: ${{secrets.HEROKU_EMAIL}}
          
      #- name: Initi project
      #  uses: actions/checkout@v2
      #- name: PHP Linter
      #  uses: michaelw90/PHP-Lint@master
      #- name: Sercurity checker
      #  uses: symfonycorp/security-checker-action@v2
      #- name: PHPStan
      #  uses: docker://oskarstark/phpstan-ga
      #  with:
      #    args: analyse src/ --level=5
      #- name: Deploy to Heroku
      #  uses: akhileshns/heroku-deploy@v3.5.6 # This is the action
      #  with:
      #    heroku_api_key: ${{secrets.HEROKU_KEY}}
      #    heroku_app_name: ${{secrets.HEROKU_APP}}
      #    heroku_email: ${{secrets.HEROKU_EMAIL}}